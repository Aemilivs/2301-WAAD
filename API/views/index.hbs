<!DOCTYPE html>
<html>
<head>
  <title>{{title}}</title>
</head>
<body>
  <h1>{{title}}</h1>
  <form action="/users/{{userId}}" method="POST" id="user_form" onsubmit="handleSubmit(event)">
    <label for="userId">User ID:</label>
    <input type="text" id="userId" name="userId">
    <button type="submit">Submit</button>
  </form>
  <script>
    function handleSubmit(event) {
      event.preventDefault();

      let form = document.getElementById("user_form");
      form.onsubmit = 
        async (event) => {
            try {
              const userId = event.target.querySelector('input[name="userId"]').value;
              var token = sessionStorage.getItem('token');
              if (!token) 
                throw '/';               
            } catch (exception) {
              window.location.replace(exception);
              throw exception;
            }

            {{!-- try {
               let url = `${window.location.origin}/api/`
            } --}}
          }
      }
  </script>
</body>
</html>
